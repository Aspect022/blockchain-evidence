name: Auto Greet Contributors

on:
  issues:
    types: [opened]
  pull_request_target:
    types: [opened]
  issue_comment:
    types: [created]

permissions:
  issues: write
  pull-requests: write

jobs:
  auto-greet:
    runs-on: ubuntu-latest
    steps:
      - name: Greet Contributors
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            if (context.eventName === 'issues' && context.payload.action === 'opened') {
              await github.rest.issues.createComment({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.payload.issue.number,
                body: 'ğŸ‘‹ Thank you for taking the time to raise this issue!\n\nWe appreciate your contribution to improving the Project **EVID-DGC**. To help us address it effectively, please make sure you follow this: âš ï¸\n\n### ğŸ“‹ Important Guidelines:\n- ğŸ“– Follow the issue guidelines: https://github.com/Gooichand/blockchain-evidence/issues/50\n- ğŸ“ Fill this form: https://forms.cloud.microsoft/r/0VjHehyNaw\n- âœ… Use the issue template mentioned in pinned issue #50\n\n### ğŸ•’ What\'s Next?\nOur team will review your issue shortly. Stay tuned and have a happy contribution! ğŸš€\n\n---\n~ Team EVID-DGC ğŸ”'
              });
            }
            
            if (context.eventName === 'pull_request_target' && context.payload.action === 'opened') {
              await github.rest.issues.createComment({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.payload.pull_request.number,
                body: 'ğŸ‰ Thank you for submitting a pull request!\n\nWe appreciate the time and effort you\'ve put into contributing to project **EVID-DGC**. To help us review your PR smoothly, please ensure that:\n\n### âœ… PR Checklist:\n- [ ] The PR description clearly explains the changes made\n- [ ] **Video or image of changes** (ğŸ“¸ **COMPULSORY** if UI/frontend changes are applicable)\n- [ ] add related issues are linked (e.g., "Fixes #123")\n- [ ] Commit messages are descriptive and follow our guidelines\n\n### ğŸ” Review Process:\nOur team will review your PR as soon as possible. Feedback may be provided to ensure consistency with project standards. Collaboration is welcomeâ€”feel free to engage in discussion and iterate on the changes.\n\nYour contribution helps make this project better for everyone! ğŸš€\n\n---\n~ Team EVID-DGC ğŸ”'
              });
            }
            
            if (context.eventName === 'issue_comment' && context.payload.action === 'created') {
              if (context.payload.comment.body.toLowerCase().includes('assign') || 
                  context.payload.comment.body.toLowerCase().includes('can i work') || 
                  context.payload.comment.body.toLowerCase().includes('can i take') || 
                  context.payload.comment.body.toLowerCase().includes('i would like to work') || 
                  context.payload.comment.body.toLowerCase().includes('please assign')) {
                await github.rest.issues.createComment({
                  owner: context.repo.owner,
                  repo: context.repo.repo,
                  issue_number: context.payload.issue.number,
                  body: 'ğŸ™Œ Thanks for your interest in working on this issue!\n\nWe\'d be happy to assign this issue to you soon. Before you start, please make sure to:\n\n### ğŸ“ Pre-Assignment Requirements:\n- âœ… Fill this form: https://forms.cloud.microsoft/r/0VjHehyNaw\n- ğŸ“‹ Follow proper order and workflow\n- ğŸ’¡ **Comment your plan of action** to resolve this issue (required)\n\n### ğŸ¯ Next Steps:\nBased on your plan of action, the issue will be assigned to you. If you run into any blockers, feel free to ask questions or request guidance. \n\nCollaboration is always welcome, and we appreciate your contribution to improving this project! ğŸš€\n\n---\n~ Team EVID-DGC ğŸ”'
                });
              }
            }